---
date: 2021-01-30 21:00
description: Publishæ˜¯ä¸€æ¬¾ä¸“é—¨ä¸ºSwiftå¼€å‘è€…æ‰“é€ çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨ã€‚å®ƒä½¿ç”¨Swiftæ„å»ºæ•´ä¸ªç½‘ç«™ï¼Œå¹¶æ”¯æŒä¸»é¢˜ã€æ’ä»¶å’Œå…¶ä»–å¤§é‡çš„å®šåˆ¶é€‰é¡¹ã€‚
 æœ¬æ–‡åŒ…å«Publishçš„å¿«é€Ÿä½¿ç”¨å…¥é—¨ä»¥åŠåŸºæœ¬ç»“æ„è¯´æ˜ã€‚
tags: Swift,Publish
title: ç”¨Publishåˆ›å»ºåšå®¢ï¼ˆä¸€ï¼‰â€”â€”å…¥é—¨
---
> [Publish](https://github.com/JohnSundell/Publish)æ˜¯ä¸€æ¬¾ä¸“é—¨ä¸ºSwiftå¼€å‘è€…æ‰“é€ çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨ã€‚å®ƒä½¿ç”¨Swiftæ„å»ºæ•´ä¸ªç½‘ç«™ï¼Œå¹¶æ”¯æŒä¸»é¢˜ã€æ’ä»¶å’Œå…¶ä»–å¤§é‡çš„å®šåˆ¶é€‰é¡¹ã€‚
> ä½œä¸ºSwiftå¼€å‘è€…ï¼Œé€šè¿‡Publishåˆ›å»ºç«™ç‚¹çš„å¼€å‘è¿‡ç¨‹å’Œä½“éªŒåŒå¼€å‘å…¶ä»–ç¨‹åºå¾ˆç±»ä¼¼ã€‚

## å¼€ç¯‡ ##

### å¼€å‘è€…John Sundell ###

Publishçš„å¼€å‘è€…John Sundellè¿™äº›å¹´ä¸€ç›´è‡´åŠ›äºå‘è¡¨å…³äºSwiftçš„é«˜è´¨é‡æ–‡ç« ã€æ’­å®¢å’Œè§†é¢‘ã€‚ä»–çš„ä½œå“å¤§å¤šéƒ½å‘å¸ƒåœ¨å…¶ç‹¬ç«‹è¿è¥çš„ [Swift by Sundell](https://swiftbysundell.com/)ä¸Šã€‚ä»–å¼€å‘äº†[Publish](https://github.com/JohnSundell/Publish)ç”¨ä»¥åˆ›å»ºå¹¶ç®¡ç†è‡ªå·±çš„ç«™ç‚¹ã€‚

åœ¨å¼€å‘Publishçš„è¿‡ç¨‹ä¸­ï¼Œä»–è¿˜å¼€æºäº†å…¶ä»–å¤§é‡çš„åŸºæœ¬åº“ï¼Œæ¯”å¦‚[Ink](https://github.com/JohnSundell/Ink)ï¼ˆé«˜æ•ˆçš„Markdownè§£æå™¨ï¼‰ã€[Plot](https://github.com/JohnSundell/Plot)ï¼ˆåˆ›å»ºHTMLã€XMLã€RSSçš„DSLï¼‰ã€[Sweep](https://github.com/JohnSundell/Sweep)ï¼ˆé«˜æ•ˆçš„å­—ç¬¦ä¸²æ‰«æåº“ï¼‰ã€[Codextended](https://github.com/JohnSundell/Codextended)ï¼ˆCodableå¢å¼ºï¼‰ç­‰ã€‚å®ƒä»¬ä¸ä»…ä¸€èµ·æ„å»ºäº†å¼ºå¤§çš„Publishï¼Œå¹¶ä¸”åœ¨å„è‡ªçš„é¢†åŸŸä¹Ÿæ˜¯æä¸ºå‡ºè‰²çš„å¼€æºåº“ã€‚

### æˆ‘ä¸ºä»€ä¹ˆä½¿ç”¨Publish ###

æˆ‘åœ¨ä¸€å¹´å‰æ¢å¤è‡ªå·±çš„è¿™ä¸ªåšå®¢æ—¶ä½¿ç”¨çš„æ˜¯`Hexo`ã€‚Hexoåœ¨å›½å†…æœ‰éå¸¸å¥½çš„ç¾¤ä¼—åŸºç¡€ï¼Œç½‘ä¸Šæœ‰å¤§é‡ä¼˜ç§€çš„æ•™ç¨‹ï¼Œä¹Ÿæœ‰éå¸¸å¤šçš„å¼€å‘è€…è´¡çŒ®äº†è‡ªå·±åˆ›ä½œçš„å„ç§ä¸»é¢˜å’Œæ’ä»¶ã€‚å°½ç®¡Hexoè®©æˆ‘ç›¸å½“æ»¡æ„ï¼Œä½†ç”±äºæˆ‘ä¸»è¦ä½¿ç”¨çš„è¯­è¨€æ˜¯Swiftï¼Œä¸”å¯¹JavaScriptéå¸¸ä¸ç†Ÿæ‚‰ï¼Œå› æ­¤æƒ³è¦å¯¹Hexoåšæ›´æ·±å…¥çš„å®šåˆ¶æˆ–ä¿®æ”¹å¾ˆå›°éš¾ã€‚

ä½œä¸ºå¼€å‘è€…ï¼ˆå³ä½¿æ˜¯ä¸šä½™çš„ï¼‰ï¼Œæ€»å¸Œæœ›å¯¹è‡ªå·±çš„é¡¹ç›®æœ‰æ›´å…¨é¢çš„æŒæ§ï¼Œå› æ­¤å®Œå…¨ç”±Swiftå¼€å‘çš„Publishå°±æˆä¸ºäº†æˆ‘çš„é¦–é€‰ã€‚

éšç€ä½¿ç”¨Publishå¯¹[è‚˜å­çš„Swiftè®°äº‹æœ¬](https://www.fatbobman.com)é‡å»ºè¿‡ç¨‹çš„æ·±å…¥ï¼Œæˆ‘æ„Ÿè§‰è‡ªå·±åšå‡ºäº†æ­£ç¡®çš„é€‰æ‹©ã€‚Publishè®©æˆ‘å¯ä»¥ç”¨å¼€å‘æ™®é€šappçš„æ€è·¯å’Œé€»è¾‘æ¥åˆ›å»ºç«™ç‚¹ï¼Œé«˜æ•ˆåœ°å®Œæˆæˆ‘æƒ³è¦çš„å„ç§å®šåˆ¶å’Œæ”¹åŠ¨ã€‚

### å†™æœ¬æ–‡çš„åŸå›  ###

æˆªè‡³è½ç¬”æ—¶ï¼ŒPublishå·²ç»åœ¨Githubä¸Šè·å¾—äº†3.1Kçš„å¥½è¯„ã€‚ä½†ç½‘ç»œä¸Šå¯¹Publishçš„ä»‹ç»å¹¶ä¸å¤šï¼Œå°¤å…¶æ¬ ç¼ºå…³äºæ¨¡æ¿å®šåˆ¶ã€æ’ä»¶å¼€å‘æ–¹é¢çš„èµ„æ–™å’Œäº¤æµã€‚åœ¨Githubä¸Šæœç´¢ç›¸å…³çš„æ’ä»¶å’Œæ¨¡æ¿çš„ç»“æœæ•°é‡ä¹Ÿéå¸¸æœ‰é™ã€‚

é€ æˆä¸Šè¿°çš„æƒ…å†µå›ºç„¶æœ‰Publishè¯ç”Ÿæ—¶é—´è¾ƒçŸ­ã€ä½¿ç”¨é‡ä¸å¤§ï¼ŒSwiftåœˆå­è¾ƒå°ç­‰åŸå› ï¼Œä½†æˆ‘è®¤ä¸ºä¸‹é¢çš„æƒ…å†µä¹ŸåŠ å‰§äº†è¿™ä¸€å±€é¢çš„å½¢æˆï¼šç”±äºä¸åŒäºå…¶ä»–çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨ï¼Œåœ¨Publishé¡¹ç›®ä¸­ï¼Œå¼€å‘è€…å¯ä»¥ç”¨çŸ­å°çš„ä»£ç å®ç°å„ç§åŠŸèƒ½ã€‚è¿™ç§ç¢ç‰‡åŒ–çš„ä»£ç å…¶å®æ˜¯ä¸åˆ©äºåˆ†äº«ä¸”å¹¶ä¸å®¹æ˜“è¢«æœç´¢ï¼›å¦å¤–ï¼Œç”±äºPublishä¸­çš„æ¨¡æ¿å’Œç½‘ç«™çš„åŠŸèƒ½å…·ä½“å®ç°ç»‘å®šçš„è¾ƒæ·±ï¼Œå•ç‹¬åˆ†äº«çš„æ¨¡æ¿çš„åˆ©ç”¨åº¦ä¹Ÿè¾ƒä½ã€‚

> ä½†Publishçš„è¿™ç§ç‰¹è´¨ä¹Ÿæ°æ°æ˜¯å…¶å¸å¼•äººä¹‹å¤„ã€‚

æœ‰é‰´äºæ­¤ï¼Œæˆ‘å°†ç”¨ä¸‰ç¯‡æ–‡ç« ï¼ˆå…¥é—¨ã€å¦‚ä½•å†™æ¨¡æ¿ã€å¦‚ä½•å†™æ’ä»¶ï¼‰å®Œæˆå¯¹Publishçš„ç®€ç»ï¼Œä¹Ÿå¸Œæœ›å›½å†…çš„Swiftå¼€å‘è€…æˆ–çˆ±å¥½è€…ä»¬å¯ä»¥æ›´å¤šçš„äº†è§£å’Œä½¿ç”¨è¿™ä¸ªä¼˜ç§€çš„å·¥å…·ã€‚

ä¸ºäº†è®©å¤§å®¶èƒ½å¤Ÿå¿«é€Ÿä¸Šæ‰‹ï¼Œæˆ‘å·²å°†æœ¬ç«™ç‚¹æ‰€ç”¨çš„ä»£ç ï¼ˆåŒ…æ‹¬æ¨¡æ¿ã€è‡ªå®šä¹‰æ’ä»¶ç­‰ï¼‰æ”¾ç½®åœ¨[Github](https://github.com/fatbobman/PublishThemeForFatbobmanBlog)ä¸Šï¼Œæ–¹ä¾¿å¤§å®¶é€šè¿‡ä»£ç æ›´å¿«çš„äº†è§£å’ŒæŒæ¡Publishã€‚

## å¿«é€Ÿä½¿ç”¨å…¥é—¨ ##

### å¦‚ä½•å®‰è£…Publish ###

åŒå¤§é‡çš„å…¶ä»–é™æ€ç½‘ç«™ç”Ÿæˆå™¨ä¸€æ ·ï¼ŒPublishæä¾›äº†CLIã€‚ä½ å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå¿«é€Ÿçš„å®Œæˆåˆ›å»ºæ¨¡æ¿ã€å†…å®¹æ›´æ–°ã€è¿œç¨‹å‘å¸ƒç­‰ä¸€ç³»åˆ—æ“ä½œã€‚Publishç›®å‰å¯ä»¥è¿è¡Œåœ¨Macå’ŒLinuxä¸Šï¼Œç”±äºå…¶ä»£ç å¯¹æ“ä½œç³»ç»Ÿçš„ä¾å­˜åº¦æä½ï¼Œä¼°è®¡å…¶åä¹Ÿå‡ºç°åœ¨Windowså¹³å°ä¸Šã€‚

#### Macä¸‹é€šè¿‡brewå®‰è£… ####

```bash
$brew install publish
```

#### æºä»£ç å®‰è£… ####

```bash
$git clone https://github.com/JohnSundell/Publish.git
$cd Publish
$make
```

### åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªé¡¹ç›® ###

è®©æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„Blogé¡¹ç›®

```bash
$mkdir myblog
$cd myblog
$publish new
```

Publishå°†åœ¨myblogç›®å½•ä¸­åˆ›å»ºæˆ‘ä»¬æ‰€éœ€çš„é¡¹ç›®æ¨¡æ¿ã€‚å®ƒçš„åŸºæœ¬æ„æˆå¤§æ¦‚å¦‚ä¸‹ï¼š

```
|-- myblog
|   |-- Content
|           |â€“â€“ posts
|                 |â€“â€“ first-post.md
|                 |â€“â€“ index.md
|           |â€“â€“ index.md
|   |-- Resources
|   |-- Sources
|           |â€“â€“ Myblog
|                  |â€“â€“ main.swift
```

* Content

  åœ¨æ­¤æ”¾å…¥ä½ è¦åœ¨ç½‘ç«™å‘å¸ƒçš„æ–‡ç« ã€é¡µé¢ç­‰ä½¿ç”¨markdownç¼–å†™çš„æ–‡ä»¶ã€‚

* Resources

  é¡¹ç›®ä¸»é¢˜éœ€è¦çš„ä¸€äº›èµ„æºï¼Œæ¯”å¦‚cssï¼Œå›¾ç‰‡ç­‰ï¼Œç›®å‰ä¸ºç©ºã€‚åœ¨ä½ è¿›è¡Œç¬¬ä¸€å‘å¸ƒåï¼Œå¯ä»¥çœ‹åˆ°å®ƒåŒ…å«äº†é»˜è®¤çš„FoundationThemeçš„styles.cssæ–‡ä»¶ã€‚

* Source

  æè¿°ç½‘ç«™çš„ä»£ç ã€‚åœ¨`main.swift`ä¸­å®šä¹‰äº†ç½‘ç«™çš„åŸºæœ¬å±æ€§ã€åˆ›å»ºå·¥ä½œæµç­‰ã€‚

### ç¼–è¯‘åŠè¿è¡Œ ###

Swiftæ˜¯ç¼–è¯‘å‹è¯­è¨€ï¼Œå› æ­¤ä½ çš„ç«™ç‚¹çš„ä»£ç åœ¨æ¯æ¬¡ä¿®æ”¹ä¹‹åï¼Œéƒ½éœ€åœ¨æœ¬æœºç¼–è¯‘å¹¶è¿è¡Œæ‰èƒ½å®Œæˆå†…å®¹çš„ç”Ÿæˆå·¥ä½œï¼Œå¥½åœ¨è¿™ä¸€åˆ‡éƒ½åªéœ€è¦ä¸€æ¡å‘½ä»¤ã€‚

æˆ‘ä»¬è®©Publishå®Œæˆä¸Šè¿°å·¥ä½œå¹¶å¯åŠ¨å†…ç½®çš„Web Serverä¾›æˆ‘ä»¬æµè§ˆæ–°åˆ›å»ºçš„é¡¹ç›®ã€‚

```bash
$publish run
```

ç¬¬ä¸€æ¬¡è¿è¡Œï¼ŒPublishä¼šè‡ªåŠ¨ä»Githubä¸Šè·å–æ‰€éœ€çš„å…¶ä»–åº“ï¼Œè¯·ç¨ç­‰å‡ åˆ†é’Ÿã€‚

```bash
$ publish run
............
Publishing Myblog (6 steps)
[1/6] Copy 'Resources' files
[2/6] Add Markdown files from 'Content' folder
[3/6] Sort items
[4/6] Generate HTML
[5/6] Generate RSS feed
[6/6] Generate site map
âœ… Successfully published Myblog
ğŸŒ Starting web server at http://localhost:8000

Press ENTER to stop the server and exit
```

ç°åœ¨ä½ å°±å¯ä»¥ç”¨æµè§ˆå™¨è®¿é—® http://localhost:8000 æ¥è®¿é—®ä½ çš„æ–°ç«™ç‚¹äº†ã€‚

ç½‘ç«™çš„å…¨éƒ¨å†…å®¹éƒ½è¢«ç”Ÿæˆå¹¶æ”¾ç½®åœ¨äº†`Output`ç›®å½•ä¸‹ã€‚ä½ åªéœ€è¦å°†å…¶ä¸­çš„å†…å®¹ä¸Šä¼ åˆ°ä½ çš„æœåŠ¡å™¨ï¼Œæˆ–è€…é€šè¿‡ç®€å•çš„é…ç½®ï¼Œæ¯”å¦‚ï¼š

```swift
.unwrap(.gitHub("fatbobman/fatbobman.github.io", useSSH: true), PublishingStep.deploy)
```

ç„¶åä½¿ç”¨

```bash
$publish deploy
```

ä¾¿å¯å°†å†…å®¹å‘å¸ƒåˆ°ä½ çš„github.ioä¸Šï¼ˆå…·ä½“é…ç½®åé¢è¯´æ˜ï¼‰ã€‚

æ­¤æ—¶ä½ åœ¨`Content` - `posts`ä¸­æ·»åŠ å¦‚ä¸‹æ–‡ä»¶`second-post.md`

```
---
date: 2021-01-29 19:58
description: æˆ‘çš„ç¬¬äºŒç¯‡æ–‡ç« 
tags: publish,swift 
---
# Hello Wolrd
```

å†åº¦æ‰§è¡Œ `publish run` ä¾¿å¯ä»¥çœ‹åˆ°æ–°æ–‡ç« å·²ç»å‡ºç°åœ¨é¡µé¢ä¸Šäº†ã€‚

### ä½¿ç”¨æˆ‘æä¾›çš„æ¨¡æ¿å¿«é€Ÿä¸Šæ‰‹ ###

é¦–å…ˆè¦ç¡®ä¿å·²ç»å®‰è£…äº†Publish CLI

```bash
$git clone https://github.com/fatbobman/PublishThemeForFatbobmanBlog.git
$cd PublishThemeForFatbobmanBlog
$publish run
```

## æ›´å¤šå…³äºPublishçš„çŸ¥è¯† ##

æœ¬èŠ‚çš„å†…å®¹å°†ä»‹ç»å‡ ä¸ªPublishä¸­çš„æ¦‚å¿µï¼Œå¯¹äºåé¢äº†è§£æ¨¡æ¿å®šåˆ¶å’ŒåŠŸèƒ½æ‰©å±•ååˆ†é‡è¦ã€‚

### Site ###

å½“ä½ ä½¿ç”¨Publishæ¥åˆ›å»ºé¡¹ç›®æ—¶ï¼ŒPublishä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª`Swift Package`ã€‚ç½‘ç«™çš„ç”Ÿæˆå’Œéƒ¨ç½²é…ç½®éƒ½æ˜¯é€šè¿‡è¯¥åŒ…å®Œæˆçš„ï¼Œä½¿ç”¨çš„éƒ½æ˜¯åŸç”Ÿçš„ä¸”ç±»å‹å®‰å…¨çš„Swiftä»£ç ã€‚

ä¸‹é¢çš„ä»£ç ä¾¿æ˜¯ä½¿ç”¨`publish new myblog`ç”Ÿæˆçš„`main.swift`ï¼ˆåŒ…çš„å…¥å£æ–‡ä»¶ï¼‰ä¸­å†…å®¹ã€‚

```swift
//Siteçš„å®šä¹‰
struct Myblog: Website {
    enum SectionID: String, WebsiteSectionID {
        // æ·»åŠ ä½ éœ€è¦çš„Section
        case posts
    }

    struct ItemMetadata: WebsiteItemMetadata {
        // åœ¨è¿™é‡Œæ·»åŠ ä»»ä½•æ‚¨æƒ³ä½¿ç”¨çš„ç‰¹å®šç«™ç‚¹å…ƒæ•°æ®
    }

    // ä½ ç½‘ç«™çš„ä¸€äº›é…ç½®xn'xi
    var url = URL(string: "https://your-website-url.com")!
    var name = "Myblog"
    var description = "A description of Myblog"
    var language: Language { .english }
    var imagePath: Path? { nil }
}
//å¯ä»¥åœ¨æ¨¡æ¿æˆ–æ’ä»¶ç­‰ä½ç½®è®¿é—®Siteä¸­çš„å±æ€§ä¿¡æ¯

// æ‰§è¡Œå…¥å£ã€‚å½“å‰ä½¿ç”¨çš„æ˜¯é»˜è®¤çš„æ¨¡æ¿ï¼Œä¸”ä½¿ç”¨çš„æ˜¯Publishé¢„ç½®çš„ç”Ÿæˆã€å¯¼å‡ºã€å‘å¸ƒæµç¨‹ã€‚
// å·¥ä½œæµçš„å®šä¹‰ï¼Œæ›´å¤šå†…å®¹è§Step
try Myblog().publish(withTheme: .foundation)
```

`Site`ä¸ä»…å®šä¹‰äº†ç½‘ç«™é¡¹ç›®çš„åŸºç¡€é…ç½®ä¿¡æ¯ï¼Œè€Œä¸”å®šä¹‰äº†ç½‘ç«™ä»ç”Ÿæˆåˆ°å‘å¸ƒçš„å·¥ä½œæµç¨‹ã€‚

### Section ###

æ¯ä¸ªSectionéƒ½ä¼šåœ¨`Output`ä¸‹ç”Ÿæˆçš„ä¸€ä¸ªå­ç›®å½•ã€‚åœ¨main.swiftä¸­ï¼Œé€šè¿‡æšä¸¾çš„æ–¹å¼å¯¹`Section`è¿›è¡Œå®šä¹‰ã€‚ä½ å¯ä»¥æŠŠSectionå¯ä»¥ä½œä¸ºä¸€ç»„`Item`ï¼ˆæ–‡ç« ï¼‰çš„å®¹å™¨ï¼Œä¹Ÿå¯ä»¥ä»…æŒ‡å‘æŸä¸ª`Page`ï¼ˆéItemçš„è‡ªæœ‰é¡µé¢ï¼‰ã€‚  å½“éœ€è¦ä½¿ç”¨`Section`ç®¡ç†ä¸€ç»„æ–‡ç« æ—¶ï¼Œåªéœ€è¦åœ¨`Content`ç›®å½•ä¸‹åˆ›å»ºåŒè¯¥`Section`åå­—ç›¸åŒçš„å­ç›®å½•å³å¯ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹èŒƒä¾‹ä¸­`Content`ä¸‹çš„`posts`å’Œ`project`ã€‚

`Section`çš„å®šä¹‰

```swift
enum SectionID: String, WebsiteSectionID {
     case posts //æ–°åˆ›å»ºçš„é¡¹ç›®ç¼ºçœåªæœ‰è¿™ä¸ªï¼Œå¯¹åº”content-postsç›®å½•
     case links //å¯ä»¥è‡ªå·±æ·»åŠ ï¼Œå°†å±äºè¯¥sectionçš„æ–‡ç« æ”¾ç½®åˆ°å¯¹åº”çš„ç›®å½•å³å¯
     case about
}
```

åœ¨[è‚˜å­çš„Swiftè®°äº‹æœ¬](http://www.fatbobman.com)ä¸­ï¼Œæ¯ä¸ªSectionåŒæ—¶ä¹Ÿå¯¹åº”ç€ä¸Šæ–¹å¯¼èˆªåŒºçš„ä¸€ä¸ªé€‰é¡¹ã€‚`Section`å¯ä»¥æœ‰å¤šç§ç”¨é€”ï¼Œåœ¨æ¨¡æ¿å®šåˆ¶ç« èŠ‚ä¼šåšæ›´å¤šæ¢è®¨ã€‚

### Item ###

ä¿å­˜åœ¨`Content--å¯¹åº”Sectioin`ç›®å½•ä¸­çš„æ–‡ç« ã€‚æ¯ä¸ª`Item`éƒ½å¯¹åº”ä¸€ä¸ª`Section`ï¼Œæ— éœ€ç‰¹åˆ«è®¾ç½®ï¼Œå…¶ä¿å­˜åœ¨å“ªä¸ª`Section`çš„ç›®å½•ä¸­ï¼Œå°±å±äºå“ªä¸ª`Section`ã€‚å¦‚æœè¯¥`Section`ä¸éœ€è¦ä½œä¸ºæ–‡ä»¶å®¹å™¨ï¼Œå¯ä»¥ç›´æ¥åœ¨`Content`ä¸­åˆ›å»ºå’Œ`Section`åŒåçš„mdæ–‡ä»¶ã€‚æˆ‘æä¾›çš„èŒƒä¾‹æ¨¡æ¿ä¸­ï¼Œ`about`å°±æ˜¯è¿™ç§å½¢å¼ã€‚

### Page ###

ä¸å½’å±äºä»»ä½•`Section`çš„æ–‡ç« ã€‚`Page`ä¸ä¼šå‡ºç°åœ¨`Section`çš„`item`åˆ—è¡¨ä¸­ï¼Œé€šå¸¸ä¹Ÿä¸ä¼šå‡ºç°åœ¨indexï¼ˆé¦–é¡µï¼‰åˆ—è¡¨ä¸­ã€‚åœ¨`content`ä¸‹çš„ä¸å±äºä»»ä½•`Section`çš„ç›®å½•ä¸­æŒ‰å¦‚ä¸‹ç»“æ„æ·»åŠ æ–‡ä»¶å³å¯åˆ›å»º`Page`ã€‚æ³¨æ„`Page`çš„åˆ›å»ºè·¯å¾„å’Œè®¿é—®è·¯å¾„çš„å…³ç³»ã€‚

```
| content -- 404
|             | -- index.md
```

ä½ å¯ä»¥é€šè¿‡è®¿é—®http://localhost:8000/404/index/æŸ¥çœ‹

Pageä¸ºæˆ‘ä»¬æä¾›ä¸€ç§æ„å»ºè‡ªç”±é¡µé¢çš„æ–¹æ³•ã€‚æ¯”å¦‚ä½ å¯ä»¥ç”¨å®ƒæ¥åˆ›å»ºä¸éœ€è¦æ˜¾ç¤ºåœ¨åˆ—è¡¨ä¸­çš„æ–‡ç« ï¼Œæˆ–è€…åƒèŒƒä¾‹æ¨¡æ¿çš„æ¼”ç¤ºä¸€æ ·åˆ›å»º404ğŸ˜…ã€‚

### Content ###

åœ¨æ­¤ç‰¹æŒ‡`Item`ã€`Page`ä¸­çš„`content`å±æ€§ã€‚ä½œä¸ºå†…å®¹é›†ï¼Œå…¶èŒƒå›´åŒ…æ‹¬æ–‡æœ¬ï¼ˆå¦‚æ ‡é¢˜å’Œæè¿°ï¼‰ã€æ‰€å±æ ‡ç­¾ï¼ˆtagï¼‰ã€è½¬æ¢åHTMLä»£ç ã€éŸ³é¢‘ã€è§†é¢‘ç­‰å„ç§å…ƒæ•°æ®ã€‚å…ƒæ•°æ®éœ€è¦åœ¨Markdonwæ–‡ç« çš„å¤´éƒ¨æ³¨æ˜ã€‚

`Section`ä¹Ÿæœ‰`Content`ï¼Œå®ƒçš„å†…å®¹å¯¹åº”ç€ä½ åœ¨è¯¥`Section`å¯¹åº”çš„`Content`å­ç›®å½•ä¸­åˆ›å»ºçš„index.mdï¼ˆå¦‚æœæœ‰å¿…è¦çš„è¯ï¼‰ã€‚

åœ¨ä»£ç ä¸­å°†æ¥è¿˜ä¼šç¢°åˆ°å¦ä¸€ç§`Content`,ç¡®åˆ‡çš„è¯´æ˜¯`PublishingContext`ã€‚é‡Œé¢åŒ…å«ç€æ•´ä¸ªé¡¹ç›®çš„æ‰€æœ‰ä¿¡æ¯ï¼ˆSiteã€Sectionsã€Itemsã€Tagsç­‰ï¼‰ï¼Œé€šè¿‡å°†å®ƒçš„å®ä¾‹ä¼ é€’ç»™`Step`æˆ–è€…`Plugin`æ¥å®Œæˆä¿®æ”¹æˆ–é…ç½®ç½‘ç«™çš„å„ç§å·¥ä½œã€‚

### Metadata ###

Markdownæ–‡ä»¶çš„å…ƒæ•°æ®ï¼Œåœ¨æ–‡ç« ï¼ˆMarkdownï¼‰æ–‡ä»¶çš„å¤´éƒ¨åšå‡ºæ ‡è¯†ã€‚åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç§æ˜¯Publishé¢„ç½®çš„ã€‚å¦ä¸€ç§æ˜¯é€šè¿‡åœ¨`Site`ä¸­`ItemMetadata`è‡ªå®šä¹‰çš„ã€‚

```
---
date: 2021-01-29 19:58
description: A description of my first post.
tags: first, article
author: fat 
image: https://cdn.fatbobman.com/first-post.png
---
```

#### é¢„è®¾ ####

* **title** æ–‡å­—æ ‡é¢˜

  å¦‚æœæ²¡æœ‰è®¾ç½®ï¼ŒPublishä¼šç›´æ¥æŸ¥æ‰¾æ–‡ç« æ­£æ–‡ä¸­ç¬¬ä¸€ä¸ªTop-level Head` # `ä½œä¸ºæ ‡é¢˜

* **description** æ–‡ç« ç®€ä»‹

* **date** æ–‡ç« åˆ›ä½œæ—¥æœŸ 

  å¦‚æœæ²¡è®¾ç½®åˆ™ç›´æ¥ä½¿ç”¨æ–‡ä»¶çš„modificationDate

* **tags** æ–‡ç« æ ‡ç­¾ï¼Œæ¯ç¯‡æ–‡ç« å¯ä»¥è®¾ç½®å¤šä¸ªæ ‡ç­¾ï¼Œä¸ºæ–‡ç« çš„ç»„ç»‡å¤šä¸€ä¸ªç»´åº¦

* **image** å›¾ç‰‡åœ°å€ æ¯”å¦‚å¯ä»¥ç”¨æ¥åœ¨Itemåˆ—è¡¨ä¸­æ˜¾ç¤ºä¸€ä¸ªæ–‡ç« çš„ä¸»é¢˜å›¾ç‰‡ï¼ˆéœ€åœ¨æ¨¡æ¿ä¸­å®šä¹‰ï¼‰

* **audio** éŸ³é¢‘æ•°æ® 

* **video** è§†é¢‘æ•°æ®

  éŸ³è§†é¢‘çš„å®šä¹‰è¿‡äºå¤æ‚ï¼Œå¦‚æœç¡®å®éœ€è¦å¯ä»¥è‡ªè¡Œå®šä¹‰ã€‚

#### è‡ªå®šä¹‰ ####

```swift
struct ItemMetadata: WebsiteItemMetadata {
    // Add any site-specific metadata that you want to use here.
    var author:String
}
```

å¦‚æœé¢„ç½®çš„`metadata`ä¸è¶³ä»¥æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œå¯ä»¥åœ¨`ItemMetadata`ä¸­è‡ªè¡Œå®šä¹‰ã€‚

#### ä¸¤ç§metadataçš„åŒºåˆ« ####

é¢„è®¾çš„`metadata`åœ¨Publishä¸­æ˜¯ä½œä¸ºçš„å±æ€§å­˜åœ¨çš„ã€‚

```swift
for item in content.allItems(sortedBy: \.date){
         print(item.title)
 }
```

è‡ªå®šä¹‰çš„`metadata`éœ€é€šè¿‡å¦‚ä¸‹æ–¹å¼è·å–

```swift
let author = (item.metadata as! Myblog.ItemMetadata).author
```

åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨æ›´æ–¹ä¾¿

```swift
.text(item.metadata.author)
```

Publishä¸­é¢„è®¾çš„`metadata`ï¼Œ`Item`å¹¶ä¸è¦æ±‚å¿…é¡»å¡«å†™ã€‚ä½†æ˜¯å¯¹äºè‡ªå®šä¹‰çš„`metadata`åˆ™å¿…é¡»åœ¨`markdown`æ–‡æ¡£ä¸­æ·»åŠ ã€‚`index.md`ã€ `Page` å¯ä»¥æ²¡æœ‰`metadata`ï¼ˆæ— è®ºæ˜¯å¦ä¸ºè‡ªå®šä¹‰ï¼‰

### Theme ###

Publishä½¿ç”¨[Plot](https://github.com/fatbobman/PublishThemeForFatbobmanBlog)ä½œä¸ºå…¶HTMLä¸»é¢˜çš„æè¿°å¼•æ“ï¼Œå¼€å‘è€…å¯ä»¥ç”¨éå¸¸Swiftçš„æ–¹å¼æ¥å®šä¹‰é¡µé¢ã€‚å¦‚æœä½¿ç”¨è¿‡DSLç±»å‹çš„å¼€å‘æ–¹å¼ï¼Œä¼šæ„Ÿè§‰éå¸¸äº²åˆ‡ã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç å®šä¹‰äº†Section Listçš„å¸ƒå±€å‘ˆç°

```swift
func makeSectionHTML(
        for section: Section<Site>,
        context: PublishingContext<Site>
    ) throws -> HTML {
        HTML(
            .lang(context.site.language), //ç½‘é¡µè¯­è¨€
            .head(for: section, on: context.site), //å¤´æ–‡ä»¶ï¼Œmetadataã€cssç­‰
            .body(
                .header(for: context, selectedSection: section.id), //ç½‘ç«™çš„ä¸Šéƒ¨åŒºåŸŸï¼ŒèŒƒä¾‹ä¸­åŒ…æ‹¬äº†Logoï¼Œä»¥åŠå¯¼èˆªæ¡
                .wrapper(
                    .itemList(for: section.items, on: context.site) // æ–‡ç« åˆ—è¡¨
                ),
                .footer(for: context.site) //æœ€ä¸‹æ–¹çš„ç‰ˆæƒåŒºåŸŸ
            )
        )
    }
```

åœ¨Themeä¸­å®šä¹‰çš„å¸ƒå±€ç»†èŠ‚ä»éœ€è¦åœ¨cssä¸­è¿›è¡Œè¿›ä¸€æ­¥è®¾ç½®ã€‚

ä¸Šé¢ä»£ç ä¸­ `header`ã€`wrapper`ç­‰åœ¨Plotä¸­éƒ½è¢«ç§°ä½œ`Node`,é™¤äº†ä½¿ç”¨Publishä¸­é¢„ç½®çš„å¤§é‡`Node`å¤–ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è‡ªå·±ç¼–å†™çš„`Node`ã€‚ 

æ›´å¤šå…³äºThemeçš„å†…å®¹ï¼Œå°†åœ¨ç”¨Publishåˆ›å»ºåšå®¢ï¼ˆäºŒï¼‰ä¸­åšè¯¦ç»†ä»‹ç»ã€‚

### Step ###

Publishé‡‡ç”¨å·¥ä½œæµï¼ˆPipelineï¼‰çš„æ–¹å¼æ¥æ˜ç¡®å®šä¹‰å„ä¸ªç¯èŠ‚çš„æ“ä½œè¿‡ç¨‹ã€‚ä»æ–‡ä»¶è¯»å–ã€markdownè§£æã€HTMLç”Ÿæˆã€RSSå¯¼å‡ºç­‰ç­‰ã€‚é€šè¿‡`publish new`ç”Ÿæˆçš„`main.swift`ä¸­ï¼Œå°½ç®¡åªä½¿ç”¨äº†ä¸€æ¡è¯­å¥

```swift
try Myblog().publish(withTheme: .foundation)
```

ä½†å…¶èƒŒåå¯¹åº”ç€ä¸‹é¢ä¸€ç³»åˆ—æ“ä½œæ­¥éª¤ï¼š

```swift
using: [
      .group(plugins.map(PublishingStep.installPlugin)),
      .optional(.copyResources()),
      .addMarkdownFiles(),
      .sortItems(by: \.date, order: .descending),
      .group(additionalSteps),
      .generateHTML(withTheme: theme, indentation: indentation),
      .unwrap(rssFeedConfig) { config in
      .generateRSSFeed(
               including: rssFeedSections,
                      config: config
                    )
          },
       .generateSiteMap(indentedBy: indentation),
       .unwrap(deploymentMethod, PublishingStep.deploy)
         ]
```

åœ¨å¤šæ•°çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½ä¼šæ˜¾å¼çš„å°†æ¯ä¸€ä¸ªæ“ä½œæ­¥éª¤æ ‡æ˜å‡ºæ¥ã€‚æ¯ä¸ªæ­¥éª¤åœ¨Publishä¸­è¢«ç§°ä¸º`Step`ã€‚Publishå·²ç»é¢„ç½®äº†ä¸å°‘`Step`ä¾›å¼€å‘è€…ä½¿ç”¨ã€‚æˆ‘ä¹ˆä¹Ÿå¯ä»¥å°†è‡ªå·±åˆ›å»ºçš„`Step`æ³¨å…¥åˆ°å·¥ä½œæµä¸­åˆé€‚çš„ä½ç½®ä»¥å®ç°æ›´å¤šåŠŸèƒ½ã€‚

æ¯ä¸ª`Step`éƒ½ä¼šè¢«ä¼ é€’ä¸€ä¸ª`PublishContent`å®ä¾‹ï¼Œè¯¥å®ä¾‹å¯ç”¨äºæ›´æ”¹ç½‘ç«™ä¸­çš„å„ç§å…ƒç´ ï¼ˆåŒ…æ‹¬æ–‡ä»¶ã€æ–‡ä»¶å¤¹ã€Itemã€Pageç­‰ï¼‰ã€‚å…³äº`PublishContent`åŒ`Content`çš„ä¸åŒï¼Œè¯·è§ä¸Šæ–‡ã€‚

### Plugin ###

```swift
.installPlugin(.highlightJS()), //è¯­æ³•é«˜äº®
```

ä¸Šé¢çš„ä»£ç åœ¨Publishå·¥ä½œæµä¸­é€šè¿‡åä¸º`installPlugin`çš„`Step`æ¥å®Œæˆæ’ä»¶`highlightJS`çš„å®‰è£…ã€‚

`Plugin`çš„å¼€å‘å’Œ`Step`éå¸¸ç±»ä¼¼ï¼Œéƒ½ä¼šè·å¾—ä¸€ä¸ª`PublishContent`å®ä¾‹ï¼Œå¹¶é€šè¿‡å…¶å®Œæˆç›¸å…³å·¥ä½œã€‚

æ¯”å¦‚è¯´ï¼Œä½ å¯ä»¥ç”¨`Step`æ¥å®ŒæˆæŸäº›å…·æœ‰å‰¯ä½œç”¨çš„æ“ä½œï¼›ç”¨`Plugin`æ¥å®Œæˆç±»å¦‚`Modifier`ï¼ˆmarkdownçš„å®šåˆ¶åŒ–è§£æï¼‰æ³¨å…¥çš„å·¥ä½œã€‚

å¯¹äºè‡ªå®šä¹‰ä»£ç ï¼Œä»åŠŸèƒ½è§’åº¦è®²ï¼Œä¸¤è€…éƒ½èƒ½å®ç°å¯¹æ–¹çš„å·¥ä½œã€‚å› æ­¤åœ¨åˆ›å»ºåŠŸèƒ½æ‰©å±•æ—¶ï¼Œé‡‡ç”¨`Step`è¿˜æ˜¯`Plugin`å–å†³äºä¸ªäººçš„åå¥½ã€‚

å…³äºå¦‚ä½•å®šåˆ¶`Step`å’Œ`Plugin`å°†åœ¨ç”¨Publishåˆ›å»ºåšå®¢ï¼ˆä¸‰ï¼‰ä¸­åšè¯¦ç»†è¯´æ˜ã€‚

## Publishé€‚åˆä»€ä¹ˆäºº ##

PublishåŒå½“å‰ä¸»æµçš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨ç›¸æ¯”è¿˜ç•¥æœ‰ä¸è¶³ï¼Œå¦‚ç¤¾åŒºæ´»è·ƒåº¦è¾ƒä½ã€å¼€å‘æ—¶é—´è¾ƒçŸ­ã€Swiftè¯­è¨€ç”¨æˆ·é‡è¾ƒå°ç­‰ã€‚å½“å‰Publishè¾ƒé€‚åˆç¬¦åˆå¦‚ä¸‹çŠ¶å†µçš„æœ‹å‹ï¼š

* ä½¿ç”¨Swiftè¯­è¨€çš„å¼€å‘è€…æˆ–Swiftçš„çˆ±å¥½è€…
* æ¬ ç¼ºJavascripteçš„ç»éªŒï¼Œæˆ–è€…å–œæ¬¢Javascripte freeçš„é£æ ¼
* è¿½æ±‚é«˜æ•ˆã€ç®€æ´çš„ç½‘é¡µå‘ˆç°æ–¹å¼
* å¸Œæœ›èƒ½å¤Ÿå®Œæ•´æŒæ¡ç½‘ç«™çš„å„ä¸ªç¯èŠ‚å¹¶é€šè¿‡è‡ªå·±çš„åŒæ‰‹é€æ­¥å®ç°å„é¡¹åŠŸèƒ½
* å–„äºå°é²œè€…

## Next ##

æˆ‘å°†åœ¨ç”¨Publishåˆ›å»ºåšå®¢ï¼ˆäºŒï¼‰ä¸­æ¢è®¨Themeçš„å¼€å‘ï¼Œåœ¨ï¼ˆä¸‰ï¼‰ä¸­äº†è§£å¦‚ä½•é€šè¿‡å¤šç§æ‰‹æ®µæ‰©å±•Publishçš„åŠŸèƒ½ã€‚

å¦‚æœä½ å·²ç»å¼€å§‹æ„Ÿå…´è¶£ï¼Œé©¬ä¸Šåœ¨Githubä¸Šå¼€é€šä½ çš„github.ioç«™ç‚¹ï¼Œç”¨Publishä¸€é”®deployå±äºè‡ªå·±çš„åšå®¢å§ã€‚
